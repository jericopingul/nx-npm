const a4_0x5065=['apply','dtePollTasks','mapRespToPerfEntry','completeRunGroup','data','defineProperty','value','apiAxiosInstance','runGroup:\x20','axiosException','/nx-cloud/executions/tasks','next','../../../utilities/axios','error:\x20','response','../../../utilities/environment','__esModule','RUNNER_FAILURE_PERF_ENTRY','Completing\x20run\x20group\x20with\x20an\x20error','DistributedAgentApi','done','note','axiosMultipleTries','recordMetric','createApiAxiosInstance','VERBOSE_LOGGING','agentName','error','__awaiter','post','../../../utilities/nx-imports','runGroup','createMetricRecorder','then'];(function(_0x49bb44,_0x5065d7){const _0x2f9b04=function(_0x1c779a){while(--_0x1c779a){_0x49bb44['push'](_0x49bb44['shift']());}};_0x2f9b04(++_0x5065d7);}(a4_0x5065,0x19a));const a4_0x2f9b=function(_0x49bb44,_0x5065d7){_0x49bb44=_0x49bb44-0x0;let _0x2f9b04=a4_0x5065[_0x49bb44];return _0x2f9b04;};'use strict';var __awaiter=this&&this[a4_0x2f9b('0x1a')]||function(_0x458a67,_0x24d881,_0x143803,_0x38056d){function _0x3c4e1f(_0x2d6390){return _0x2d6390 instanceof _0x143803?_0x2d6390:new _0x143803(function(_0x5bc09d){_0x5bc09d(_0x2d6390);});}return new(_0x143803||(_0x143803=Promise))(function(_0x4529df,_0x366897){function _0x106c2f(_0x5cba01){try{_0x1021f2(_0x38056d['next'](_0x5cba01));}catch(_0x3fb002){_0x366897(_0x3fb002);}}function _0x1dc149(_0x16ad8a){try{_0x1021f2(_0x38056d['throw'](_0x16ad8a));}catch(_0x371e26){_0x366897(_0x371e26);}}function _0x1021f2(_0x72cae8){_0x72cae8[a4_0x2f9b('0x12')]?_0x4529df(_0x72cae8[a4_0x2f9b('0x4')]):_0x3c4e1f(_0x72cae8['value'])[a4_0x2f9b('0x1f')](_0x106c2f,_0x1dc149);}_0x1021f2((_0x38056d=_0x38056d[a4_0x2f9b('0x20')](_0x458a67,_0x24d881||[]))[a4_0x2f9b('0x9')]());});};Object[a4_0x2f9b('0x3')](exports,a4_0x2f9b('0xe'),{'value':!![]});exports[a4_0x2f9b('0x11')]=void 0x0;const axios_1=require(a4_0x2f9b('0xa'));const environment_1=require(a4_0x2f9b('0xd'));const metric_logger_1=require('../../../utilities/metric-logger');const {output}=require(a4_0x2f9b('0x1c'));class DistributedAgentApi{constructor(_0xa4c314,_0x4ef91b,_0x404acb){this[a4_0x2f9b('0x1d')]=_0x4ef91b;this[a4_0x2f9b('0x18')]=_0x404acb;this[a4_0x2f9b('0x5')]=(0x0,axios_1[a4_0x2f9b('0x16')])(_0xa4c314);}['tasks'](_0x3aa454,_0x214e88,_0x1a2062){var _0x561284;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5039b3=(0x0,metric_logger_1[a4_0x2f9b('0x1e')])(a4_0x2f9b('0x21'));try{const _0x3e09a8=yield(0x0,axios_1[a4_0x2f9b('0x14')])(()=>this['apiAxiosInstance'][a4_0x2f9b('0x1b')](a4_0x2f9b('0x8'),{'runGroup':this[a4_0x2f9b('0x1d')],'agentName':this[a4_0x2f9b('0x18')],'executionId':_0x3aa454,'statusCode':_0x214e88,'completedTasks':_0x1a2062}));_0x5039b3[a4_0x2f9b('0x15')]((0x0,metric_logger_1[a4_0x2f9b('0x0')])(_0x3e09a8));return _0x3e09a8[a4_0x2f9b('0x2')];}catch(_0x2f6c28){_0x5039b3[a4_0x2f9b('0x15')](((_0x561284=_0x2f6c28===null||_0x2f6c28===void 0x0?void 0x0:_0x2f6c28['axiosException'])===null||_0x561284===void 0x0?void 0x0:_0x561284[a4_0x2f9b('0xc')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x2f6c28['axiosException'][a4_0x2f9b('0xc')]):metric_logger_1[a4_0x2f9b('0xf')]);throw _0x2f6c28;}});}['completeRunGroupWithError'](_0x31d928){var _0x4919f2;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a4_0x2f9b('0x17')]){output[a4_0x2f9b('0x13')]({'title':a4_0x2f9b('0x10'),'bodyLines':[a4_0x2f9b('0x6')+this[a4_0x2f9b('0x1d')],a4_0x2f9b('0xb')+_0x31d928]});}const _0x124ee6=(0x0,metric_logger_1[a4_0x2f9b('0x1e')])(a4_0x2f9b('0x1'));try{const _0x126c8e=yield(0x0,axios_1[a4_0x2f9b('0x14')])(()=>this[a4_0x2f9b('0x5')][a4_0x2f9b('0x1b')]('/nx-cloud/executions/complete-run-group',{'runGroup':this[a4_0x2f9b('0x1d')],'agentName':this[a4_0x2f9b('0x18')],'criticalErrorMessage':_0x31d928}));if(environment_1[a4_0x2f9b('0x17')]){output['note']({'title':'Completed\x20run\x20group\x20with\x20an\x20error'});}_0x124ee6['recordMetric']((0x0,metric_logger_1[a4_0x2f9b('0x0')])(_0x126c8e));}catch(_0xad942){_0x124ee6[a4_0x2f9b('0x15')](((_0x4919f2=_0xad942===null||_0xad942===void 0x0?void 0x0:_0xad942[a4_0x2f9b('0x7')])===null||_0x4919f2===void 0x0?void 0x0:_0x4919f2[a4_0x2f9b('0xc')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0xad942[a4_0x2f9b('0x7')][a4_0x2f9b('0xc')]):metric_logger_1[a4_0x2f9b('0xf')]);console[a4_0x2f9b('0x19')](_0xad942);}});}}exports[a4_0x2f9b('0x11')]=DistributedAgentApi;